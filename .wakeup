#!/bin/zsh

services=$(networksetup -listallnetworkservices | grep -v "Wi-Fi")
while IFS= read -r service; do
    if [[ $service == \** ]]; then
        networksetup -setnetworkserviceenabled "${service//\*}" on
    fi
done <<< "$services"

sleep 2

other_active_interfaces=$(ifconfig | grep -E "status: active" | grep -v "en0")

if [[ -z "$other_active_interfaces" ]]; then
    networksetup -setairportpower en0 on
fi
